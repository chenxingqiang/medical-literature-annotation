# 医学文献自动标注系统使用指南

## 🎉 系统已就绪

您的医学文献自动标注系统已经完全配置好，可以直接使用！

### ✅ 已配置的模型

- **DeepSeek**: `deepseek-chat` - 推理能力强，适合复杂关系识别
- **Qianwen**: `qwen-plus` - 中文理解优秀，医学领域表现良好

### ✅ API测试结果

两个模型都已测试通过：
- DeepSeek API ✅ 连接成功
- Qianwen API ✅ 连接成功

## 🚀 立即开始使用

### 1. 快速演示

```bash
# 演示文件标注（可选择单个或多个模型）
python demo_annotation.py --file

# 演示文本标注
python demo_annotation.py --text

# 比较演示结果
python demo_annotation.py --compare
```

### 2. 测试单个文件

```bash
# 测试单个文件标注
python run_annotation.py --test
```

### 3. 批量处理所有数据

```bash
# 批量处理（可选择模型）
python run_annotation.py --batch
```

## 📊 数据规模

您的数据集包含：
- **parasite-ids-390**: 390种寄生虫相关疾病
- **bacteria-ids-4937**: 4937种细菌相关疾病  
- **fugus-ids-610**: 610种真菌相关疾病
- **microorganism-ids-8228**: 8228种微生物相关疾病

**总计**: 约14,000种疾病的医学文献数据

## 🎯 标注任务

系统将自动完成：

1. **实体识别**
   - 🦠 Bacteria（病原微生物）
   - 🏥 Disease（自身免疫性疾病）

2. **关系分类**
   - `contributes_to`: 病原体导致疾病
   - `ameliorates`: 病原体改善疾病
   - `correlated_with`: 统计关联
   - `biomarker_for`: 诊断标志物

3. **证据提取**
   - 完整的证据句子
   - 关系类型判断

## 💡 使用建议

### 模型选择策略

1. **单模型使用**
   - DeepSeek: 适合复杂推理场景
   - Qianwen: 适合中文医学文献

2. **双模型比较**
   - 同时使用两个模型
   - 比较结果选择最佳
   - 提高标注质量

### 处理流程建议

```
1. 先运行演示 → 2. 测试单文件 → 3. 批量处理 → 4. 转换格式 → 5. 人工校验
```

## 📁 输出结构

处理完成后，您将得到：

```
annotated_results_deepseek/     # DeepSeek标注结果
├── bacteria-ids-4937/
│   └── A/
│       ├── Acute motor axonal neuropathy_annotated_deepseek.json
│       └── Acute motor axonal neuropathy_stats_deepseek.json
└── ...

annotated_results_qianwen/      # Qianwen标注结果
├── bacteria-ids-4937/
│   └── A/
│       ├── Acute motor axonal neuropathy_annotated_qianwen.json
│       └── Acute motor axonal neuropathy_stats_qianwen.json
└── ...
```

## 🔄 后续处理

### 转换为Label Studio格式

```bash
# 转换DeepSeek结果
python convert_to_label_studio.py -i annotated_results_deepseek -o label_studio_deepseek --summary

# 转换Qianwen结果  
python convert_to_label_studio.py -i annotated_results_qianwen -o label_studio_qianwen --summary
```

### 人工校验

1. 导入Label Studio进行人工校验
2. 重点检查复杂关系
3. 修正标注错误
4. 建立质量标准

## 📈 预期结果

基于测试，系统表现：

- **DeepSeek**: 识别2个实体，1个关系（contributes_to）
- **Qianwen**: 识别3个实体，2个关系（correlated_with）

不同模型可能产生不同的标注结果，这正是多模型比较的价值所在。

## ⚡ 性能预估

以您的数据规模：
- **单文件处理**: 1-2分钟（12篇文章）
- **批量处理**: 预计数小时到数天（取决于API速度）
- **建议**: 先小批量测试，再全量处理

## 🛠️ 故障排除

### 常见问题

1. **网络问题**: 检查网络连接
2. **API限制**: 注意调用频率限制
3. **余额不足**: 确保账户余额充足
4. **JSON解析错误**: 模型输出格式问题，系统会自动处理

### 优化建议

- 合理安排处理时间
- 监控API使用情况
- 定期备份结果文件

## 🎯 下一步行动

1. **立即行动**: 运行 `python demo_annotation.py --file` 开始演示
2. **小规模测试**: 选择一个小的数据子集进行测试
3. **全量处理**: 确认效果后进行批量处理
4. **质量评估**: 结合人工校验建立质量标准

## 📞 技术支持

如遇到问题：
1. 检查错误信息
2. 查看日志输出
3. 尝试重新运行
4. 联系技术支持

---

**🎉 恭喜！您的医学文献自动标注系统已经完全就绪，可以开始高效的标注工作了！** 